<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Attendance Tracker</title>
    <link rel="stylesheet" href="attendance.css">
</head>
<body>
    <div id="app">
        <h1>Course Attendance Tracker</h1>
        
        <!-- Registration Section -->
        <div class="course-card" id="registration">
            <h2>Get Started</h2>
            <button onclick="registerUser()">Start Tracking</button>
        </div>

        <!-- Course Cards (Initially hidden) -->
        <div id="courses-container" style="display: none;">
            <div class="course-card" data-course="math101">
                <h2>Mathematics 101</h2>
                <div class="progress-container">
                    <button class="control-btn minus-btn" onclick="adjustProgress('math101', -5)">-</button>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 75%"></div>
                    </div>
                    <button class="control-btn plus-btn" onclick="adjustProgress('math101', 5)">+</button>
                </div>
                <button class="calendar-toggle" onclick="toggleCalendar('math101')">â–¼ Attendance Calendar</button>
                <div class="calendar" id="calendar-math101"></div>
            </div>
        </div>
    </div>

    <script>
        let registrationDate = localStorage.getItem('registrationDate');
        
        function registerUser() {
            registrationDate = new Date().toISOString().split('T')[0];
            localStorage.setItem('registrationDate', registrationDate);
            document.getElementById('registration').style.display = 'none';
            document.getElementById('courses-container').style.display = 'block';
            renderCalendars();
        }

        function adjustProgress(courseId, amount) {
            const progressFill = document.querySelector(`[data-course="${courseId}"] .progress-fill`);
            const currentWidth = parseFloat(progressFill.style.width) || 75;
            const newWidth = Math.min(100, Math.max(0, currentWidth + amount));
            progressFill.style.width = `${newWidth}%`;
        }

        function toggleCalendar(courseId) {
            const calendar = document.getElementById(`calendar-${courseId}`);
            calendar.classList.toggle('active');
        }

        function renderCalendars() {
            if (!registrationDate) return;

            const courses = ['math101'];
            const today = new Date();
            const startDate = new Date(registrationDate);
            
            courses.forEach(courseId => {
                const calendar = document.getElementById(`calendar-${courseId}`);
                calendar.innerHTML = '';
                
                const currentMonth = today.getMonth();
                const currentYear = today.getFullYear();
                const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();

                for (let day = 1; day <= daysInMonth; day++) {
                    const date = new Date(currentYear, currentMonth, day);
                    const dateString = date.toISOString().split('T')[0];
                    const dayElement = document.createElement('div');
                    dayElement.className = 'calendar-day';
                    
                    if (date < startDate) {
                        dayElement.classList.add('inactive');
                    } else if (date > today) {
                        dayElement.classList.add('future');
                    } else {
                        // Random placeholder attendance
                        dayElement.classList.add(Math.random() > 0.5 ? 'attended' : 'missed');
                    }
                    
                    dayElement.textContent = day;
                    calendar.appendChild(dayElement);
                }
            });
        }

        // Initial setup
        if (registrationDate) {
            document.getElementById('registration').style.display = 'none';
            document.getElementById('courses-container').style.display = 'block';
            renderCalendars();
        }
    </script>
</body>
</html>